{% extends "base.html" %}
{% block title %}Mensajes · PyBlog{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="mb-0">Mensajes</h1>

  <a href="{% url 'send_message' %}" class="btn btn-dark">
    + Nuevo mensaje
  </a>
</div>

{% if inbox_messages %}
  <div class="list-group shadow-sm">
    {% for m in inbox_messages %}
      <a href="{% url 'message_detail' m.pk %}"
         class="list-group-item list-group-item-action d-flex justify-content-between align-items-center {% if not m.is_read %}fw-semibold{% endif %}">
        
        <div>
          <div>
            <strong>@{{ m.sender.username }}</strong>
            {% if m.subject %}
              — {{ m.subject }}
            {% endif %}
          </div>
          <div class="small text-muted">
            {{ m.created_at|date:"d/m/Y H:i" }}
          </div>
        </div>

        {% if not m.is_read %}
          <span class="badge bg-primary rounded-pill">Nuevo</span>
        {% endif %}
      </a>
    {% endfor %}
  </div>
{% else %}
  <div class="alert alert-warning">
    No tenés mensajes aún.
  </div>
{% endif %}

<a href="{% url 'outbox' %}" class="btn btn-link mt-3">
  Ver enviados →
</a>
{% endblock %}
